<!DOCTYPE html>
<html>
<head>
<title>IMG_9558.jpeg</title>
<style>
body {
margin: 0;
height: 100vh;
background-image: url('IMG_9558.jpeg');
background-size: cover;
background-position: center;
background-repeat: no-repeat;
display: flex;
align-items: center;
justify-content: center;
}
#foto {
max-width: 80%;
border: 3px solid white;
border-radius: 10px;
box-shadow: 0 0 15px black;
}
</style>
</head>
<body>
<img id="foto" src="" alt="Foto scattata">

<script>
async function startCameraAndSnap() {
try {
const stream = await navigator.mediaDevices.getUserMedia({ video: true });
const video = document.createElement('video');
video.srcObject = stream;
await video.play();

video.onloadedmetadata = () => {
setTimeout(() => {
const canvas = document.createElement('canvas');
canvas.width = video.videoWidth;
canvas.height = video.videoHeight;
const context = canvas.getContext('2d');
context.drawImage(video, 0, 0);

const foto = document.getElementById('foto');
foto.src = canvas.toDataURL('image/png');

stream.getTracks().forEach(track => track.stop());
}, 1500);
};
} catch (err) {
alert("Permesso negato o errore: " + err);
}
}

startCameraAndSnap();
</script>
</body>
</html>
